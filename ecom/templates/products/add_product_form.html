{% extends 'pwa/home/base.html' %} {% block content %}
<!-- Body Start -->
<body>
  <!-- Header Start -->
  <header class="header">
    <div class="logo-wrap">
      <a href="index.html"><i class="iconly-Arrow-Left-Square icli"></i></a>
      <h1 class="title-color font-md">Add Product</h1>
    </div>
    <div class="avatar-wrap">
      <a href="index.html">
        <i class="iconly-Home icli"></i>
      </a>
    </div>
  </header>
  <!-- Header End -->

  <!-- Main Start -->
  <main class="main-wrap setting-page mb-xxl">
    <!-- Form Section Start -->
    <form class="custom-form" method="post" enctype="multipart/form-data">
      {% csrf_token %}

      <div class="input-box">
        <label for="{{ form.title.id_for_label }}"></i> Title</label>
        {{ form.title }}
      </div>

      <div class="input-box">
        <label for="{{ form.description.id_for_label }}"></i> Description</label>
        {{ form.description }}
      </div>

      <!-- Image Upload Section Start -->
<div class="image-upload-section">
    <div class="upload-header">
        <i class="iconly-Plus icli"></i>
        <label for="image-upload-input" class="upload-image-label">
            Upload Images
        </label>
    </div>
    <p>You can upload up to 15 images. Recommended size: 800x600 px</p>
    <input type="file" name="product_images" id="image-upload-input" multiple accept="image/*" onchange="previewImages(event)" style="display: none;" />


    <div id="images-preview" class="images-preview-grid">
        <!-- Dynamically added images will appear here -->
    </div>
</div>
<!-- Image Upload Section End -->



      <div class="input-box">
        <label for="{{ form.regular_price.id_for_label }}"><i class="iconly-Price-Tag icli"></i> Regular Price</label>
        {{ form.regular_price }}
      </div>

      
      <!-- Other fields can be added similarly -->

      <div class="input-box">
        <label for="{{ form.youtube_link.id_for_label }}"><i class="iconly-Link icli"></i> Youtube Link</label>
        {{ form.youtube_link }}
      </div>

      

     

      <!-- The fields generated by the specifications will be dynamically rendered -->
      {% for field in form %} 
    {% if field.name not in fields_to_exclude and field.name != "product_images" %}
    <div class="input-box">
        <label for="{{ field.id_for_label }}"></i> {{ field.label }}</label>
        <!-- Render the field -->
        {{ field }}
    </div>
    {% endif %}
{% endfor %}

<!-- Seller Info Section Start -->
<div class="seller-info-section">
    <div class="seller-info-header">
        Seller Info
    </div>
    <div class="seller-info-fields">
        <div class="seller-info-field">
            <label for="seller-name">Name:</label>
            <input type="text" id="seller-name" name="seller-name" placeholder="Enter your name">
        </div>
        <div class="seller-info-field">
            <label for="seller-mobile">Mobile Number:</label>
            <input type="tel" id="seller-mobile" name="seller-mobile" placeholder="Enter your mobile number">
        </div>
        <div class="seller-info-field">
            <label for="seller-city">City:</label>
            <input type="text" id="seller-city" name="seller-city" placeholder="Enter your city">
        </div>
    </div>
</div>
<!-- Seller Info Section End -->


      <div class="submit-box">
        <button type="submit" class="btn-solid">Add Product</button>
      </div>
    </form>
    <!-- Form Section End -->
  </main>
  <!-- Main End -->
</body>
<script>
function previewImages(event) {
    const files = event.target.files; // Get selected files
    const imagesPreview = document.getElementById('images-preview');

    for (let i = 0; i < files.length; i++) {
        const file = files[i];

        if (file && file.type.startsWith('image/')) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const imageDiv = document.createElement('div');
                imageDiv.classList.add('image-preview-item');
                
                const image = document.createElement('img');
                image.src = e.target.result;

                const optionsDiv = document.createElement('div');
                optionsDiv.classList.add('image-options');
                optionsDiv.innerHTML = `
                    <div class="dots-menu">
                        <i class="three-dots-icon"></i>
                        <div class="options-dropdown">
                            <button class="option-btn">Set as Cover</button>
                            <button class="option-btn delete-btn">Delete</button>
                        </div>
                    </div>
                `;

                imageDiv.appendChild(image);
                imageDiv.appendChild(optionsDiv);
                imagesPreview.appendChild(imageDiv);

                // Add event listener to the delete button
                optionsDiv.querySelector('.delete-btn').addEventListener('click', function() {
                    imagesPreview.removeChild(imageDiv);
                });
            }

            reader.readAsDataURL(file);
        }
    }
}

</script>
{% endblock %}
