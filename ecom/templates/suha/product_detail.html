{% extends 'suha/base.html' %} {% load youtube_tags %}{% load static %} {% block content %}
<!-- Preloader-->
<div class="preloader" id="preloader">
  <div class="spinner-grow text-secondary" role="status">
    <div class="sr-only"></div>
  </div>
</div>
<!-- Header Area-->
<div class="header-area" id="headerArea">
  <div class="container h-100 d-flex align-items-center justify-content-between rtl-flex-d-row-r">
    <!-- Back Button-->
    <div class="back-button me-2">
      <a href="{% url 'products:category_detail' slug=product.category.get_root_category.slug %}"> <i class="fa-solid fa-arrow-left-long"></i></a>
    </div>

    <!-- Page Title-->
    <div class="page-heading">
      <h6 class="mb-0">Product Details</h6>
    </div>
    <!-- Navbar Toggler-->
    <div class="suha-navbar-toggler ms-2" data-bs-toggle="offcanvas" data-bs-target="#suhaOffcanvas" aria-controls="suhaOffcanvas">
      <div><span></span><span></span><span></span></div>
    </div>
  </div>
</div>
<div class="offcanvas offcanvas-start suha-offcanvas-wrap" tabindex="-1" id="suhaOffcanvas" aria-labelledby="suhaOffcanvasLabel">
  <!-- Close button-->
  <button class="btn-close btn-close-white" type="button" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  <!-- Offcanvas body-->
  <div class="offcanvas-body">
    <!-- Sidenav Profile-->
    <div class="sidenav-profile">
      <div class="user-profile"><img src="img/bg-img/9.jpg" alt="" /></div>
      <div class="user-info">
        <h5 class="user-name mb-1 text-white">Suha Sarah</h5>
        <p class="available-balance text-white">Available points <span class="counter">499</span></p>
      </div>
    </div>
    <!-- Sidenav Nav-->
    <ul class="sidenav-nav ps-0">
      <li>
        <a href="profile.html"><i class="fa-solid fa-user"></i>My Profile</a>
      </li>
      <li>
        <a href="notifications.html"><i class="fa-solid fa-bell lni-tada-effect"></i>Notifications<span class="ms-1 badge badge-warning">3</span></a>
      </li>
      <li class="suha-dropdown-menu">
        <a href="#"><i class="fa-solid fa-store"></i>Shop Pages</a>
        <ul>
          <li><a href="shop-grid.html">Shop Grid</a></li>
          <li><a href="shop-list.html">Shop List</a></li>
          <li><a href="single-product.html">Product Details</a></li>
          <li><a href="featured-products.html">Featured Products</a></li>
          <li><a href="flash-sale.html">Flash Sale</a></li>
        </ul>
      </li>
      <li>
        <a href="pages.html"><i class="fa-solid fa-file-code"></i>All Pages</a>
      </li>
      <li class="suha-dropdown-menu">
        <a href="wishlist-grid.html"><i class="fa-solid fa-heart"></i>My Wishlist</a>
        <ul>
          <li><a href="wishlist-grid.html">Wishlist Grid</a></li>
          <li><a href="wishlist-list.html">Wishlist List</a></li>
        </ul>
      </li>
      <li>
        <a href="settings.html"><i class="fa-solid fa-sliders"></i>Settings</a>
      </li>
      <li>
        <a href="intro.html"><i class="fa-solid fa-toggle-off"></i>Sign Out</a>
      </li>
    </ul>
  </div>
</div>
<div class="page-content-wrapper">
  <div class="product-slide-wrapper">
    <!-- Product Slides-->
    <div class="product-slides owl-carousel">
      <!-- Featured Image -->
      {% if product.youtube_link %}
      <div class="single-product-slide">
        <iframe id="productVideo" width="100%" height="315" src="https://www.youtube.com/embed/{{ product.youtube_link|youtube_id }}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      </div>
      {% endif %} {% if featured_image %}
      <div class="single-product-slide" style="background-image: url('{{ featured_image.image.url }}')"></div>
      {% endif %}

      <!-- Other Images -->
      {% for image in other_images %}
      <div class="single-product-slide" style="background-image: url('{{ image.image.url }}')"></div>
      {% endfor %}
    </div>
  </div>

  <div class="product-description pb-3">
    <!-- Product Title & Meta Data-->
    <div class="product-title-meta-data bg-white mb-3 py-3">
      <div class="container d-flex justify-content-between rtl-flex-d-row-r">
        <div class="p-title-price">
          <h5 class="mb-1">{{ product.title }}</h5>
          {% if product.discount_price %}
          <p class="sale-price mb-0 lh-1">{{ product.discount_price }} <span>{{ product.regular_price }}</span></p>
          {% else %}
          <p class="sale-price mb-0 lh-1">{{ product.regular_price }}</p>
          {% endif %}

          <div style="font-size: 13px">{{ action }} {% if months %}{{ months }} months{% endif %} {% if days %}{{ days }} days{% endif %} ago</div>
        </div>
        <div class="p-wishlist-share">
          <a href="wishlist-grid.html"><i class="fa-solid fa-heart"></i></a>
        </div>
      </div>

      <!-- Ratings-->
      <div class="product-ratings">
        <div class="container d-flex align-items-center justify-content-between rtl-flex-d-row-r">
          <div class="ratings"><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><span class="ps-1">3 ratings</span></div>

          <div class="total-result-of-ratings"><span>5.0</span><span>Very Good </span></div>
        </div>
      </div>
    </div>
    <!-- Seller Info Card -->
    <div class="seller-info-card bg-white mb-3 py-3">
      <div class="container">
        <div class="row align-items-center">
          <!-- 1st Column: Seller Image -->
          <div class="col-4">
            <img src="{{ seller.image_url }}" class="rounded-circle" alt="{{ seller.name }}" style="width: 100%; max-width: 80px" />
          </div>
          <!-- 2nd Column: Seller Name & Ratings -->
          <div class="col-4">
            <div class="mb-1">
              <strong>{{ product.seller_name|split_name }}</strong> <i class="fa-solid fa-badge-check"></i>

              <!-- Verified Icon -->
            </div>
            <div>
              <i class="fa-solid fa-star"></i>
              <!-- This is just one star. You can repeat it based on the seller's rating. -->
              {{ seller.rating }}
              <!-- Seller rating value -->
            </div>
          </div>
          <!-- 3rd Column: Contact & Chat -->
          <div class="col-4">
            <!-- Mobile Number Button -->
            <div class="mb-2">
              <button class="btn btn-sm btn-block custom-btn">{{ seller.mobile_number }}</button>
            </div>
            <!-- Chat Seller Button -->
            <div>
              <button class="btn btn-sm btn-block custom-btn">Chat Seller</button>
            </div>
          </div>

          <style>
            .custom-btn {
              background-color: lightgreen;
              color: white;
              border: none;
            }
            .custom-btn:hover {
              background-color: green; /* A slightly darker shade when hovered */
              color: white;
            }
          </style>
        </div>
      </div>
    </div>

    <!-- Flash Sale Panel-->

    <!-- Selection Panel-->

    <!-- Add To Cart-->
    <!-- Product Specification-->
    <div class="p-specification bg-white mb-3 py-3">
      <div class="container">
        <h6 class="mb-4" style="border-bottom: 2px solid #100dd1; padding-bottom: 10px">Specifications</h6>
        <table class="table table-responsive">
          <tbody>
            {% for spec in product_specifications %}
            <tr>
              <td class="fw-bold" style="color: #747794; width: 40%">{{ spec.specification.name }}</td>
              <td style="color: #555">{{ spec }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
        <p class="mb-0" style="color: #666">{{ product.description}}</p>
      </div>
    </div>
    <!-- Product Video -->
    <!-- YouTube Video Player -->
    {% if product.youtube_link %}
    <div class="single-product-slide">
      <iframe width="100%" height="315" src="https://www.youtube.com/embed/{{ product.youtube_link|youtube_id }}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
    {% endif %}
    <div class="pb-3"></div>
    <!-- Related Products Slides-->

    <!-- Rating & Review Wrapper -->

    <!-- Ratings Submit Form-->
  </div>
</div>
<!-- Internet Connection Status-->
<div class="internet-connection-status" id="internetStatus"></div>
<!-- Footer Nav-->
<div class="footer-nav-area" id="footerNav">
  <div class="suha-footer-nav">
    <ul class="h-100 d-flex align-items-center justify-content-between ps-0 d-flex rtl-flex-d-row-r">
      <li>
        <a href="home.html"><i class="fa-solid fa-house"></i>Home</a>
      </li>
      <li>
        <a href="message.html"><i class="fa-solid fa-comment-dots"></i>Chat</a>
      </li>
      <li>
        <a href="cart.html"><i class="fa-solid fa-bag-shopping"></i>Basket</a>
      </li>
      <li>
        <a href="settings.html"><i class="fa-solid fa-gear"></i>Settings</a>
      </li>
      <li>
        <a href="pages.html"><i class="fa-solid fa-heart"></i>Pages</a>
      </li>
    </ul>
  </div>
</div>
<script src="https://www.youtube.com/iframe_api"></script>

<script>
    var player;

    function onYouTubeIframeAPIReady() {
      console.log("YouTube Iframe API is ready."); // Debugging line
      player = new YT.Player('productVideo', {
     videoId: '{{ product.youtube_link|youtube_id }}',
     events: {
       'onStateChange': onPlayerStateChange
     }
  });
    function onPlayerStateChange(event) {
      console.log("Player state changed to: ", event.data); // Debugging line
      var owl = $(".product-slides").data("owl.carousel");
      if (event.data == YT.PlayerState.PLAYING) {
        console.log("Attempting to stop the owl carousel."); // Debugging line
        owl.stop();
      } else {
        console.log("Attempting to play the owl carousel."); // Debugging line
        owl.play();
      }
    }
</script>

{%endblock%}
